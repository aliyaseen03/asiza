ekf_filter_node:
  ros__parameters:

    frequency: 30.0
    two_d_mode: true
    publish_tf: true

    map_frame: map
    odom_frame: odom
    base_link_frame: base_footprint
    world_frame: odom  # Nav2 optimal setup


    odom0: mecanum_drive_controller/odom

    # نستخدم سرعة الروبوت (vx, vy, yaw) فقط
    odom0_config: [
      false, false, false,     # x, y, z
      false, false, false,     # roll, pitch, yaw
      true,  true,  false,     # vx, vy, vz
      false, false, true,      # vroll, vpitch, vyaw
      false, false, false      # ax, ay, az
    ]

    odom0_differential: false
    odom0_queue_size: 5

    
    imu0: imu/data

    imu0_config: [
      false, false, false,     
      false, false, false,     
      false, false, false,     
      false, false, true,      
      true,  true,  false      
    ]

    imu0_differential: false
    imu0_queue_size: 10
    #imu0_remove_gravitational_acceleration: true


    

  #  reset_on_time_jump: true
  #  print_diagnostics: true

  
   # imu0_linear_acceleration_rejection_threshold: 0.8
   # imu0_angular_velocity_rejection_threshold: 0.8

    # Filtering out jumps
    #sensor_timeout: 0.1
